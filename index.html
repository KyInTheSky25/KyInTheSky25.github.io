<!DOCTYPE html>
<html>
<head>
    <title>Hot Air Balloon Pre-Flight Checklist</title>
    <style>
        body {
            font-family: Arial, sans-serif;
        }
        .checklist-container {
            margin-top: 20px;
        }
        .checklist-item {
            margin-bottom: 20px;
        }
        .checklist-item input {
            margin-right: 10px;
            height: 40px;
            width: 40px;
        }
        .additional-info {
            margin-left: 25px;
        }
        label {
            font-size: 25px;
        }
        a {
            font-size: 25px;
        }
        @media only screen and (max-width: 600px) {
            body {
                font-size: 25px;
            }
            .checklist-item input {
                height: 60px;
                width: 60px;
            }
            label {
                font-size: 35px;
            }
            a {
                font-size: 35px;
            }
        }
    </style>
</head>
<body>
    <h1>Hot Air Balloon Pre-Flight Checklist</h1>
    <div class="checklist-container" id="checklist-container">
        <!-- Checklist items will be inserted here -->
    </div>

    <button id="reset-button">Reset</button>

    <script>
        var checklistItems = [
            { 
                step: 'Step 1: Weather Briefing',
                additionalInfo: [
                    {
                        link: 'https://ryancarlton.com/',
                        description: ''
                    }, 
                    {
                        link: 'www.1800wxbrief.com',
                        description: ' -> Plan & Brief -> Select Balloon -> Update - Departure & Destination'
                    }
                ]
            },
            { 
                step: 'Step 2: Check the basket and burner',
                additionalInfo: ['Note 1', 'Note 2']
            },
            { 
                step: 'Step 3: Check fuel levels',
                additionalInfo: []
            },
            // Add as many steps as needed...
        ];

        var checklistContainer = document.getElementById('checklist-container');
        var resetButton = document.getElementById('reset-button');

        // Load saved checkbox states from localStorage after the page has fully loaded
        window.addEventListener('load', function() {
            loadCheckboxes();
        });

        for (var i = 0; i < checklistItems.length; i++) {
            createChecklistItem(i);
        }

        resetButton.addEventListener('click', function() {
            resetCheckboxes();
        });

        function createChecklistItem(i) {
            var item = document.createElement('div');
            item.className = 'checklist-item';

            var checkbox = document.createElement('input');
            checkbox.type = 'checkbox';

            var label = document.createElement('label');
            label.textContent = checklistItems[i].step;

            item.appendChild(checkbox);
            item.appendChild(label);

            var additionalInfoList = document.createElement('div');
            additionalInfoList.className = 'additional-info';

            var subCheckboxes = [];  // Store all sub-checkboxes

            for (var j = 0; j < checklistItems[i].additionalInfo.length; j++) {
                var additionalInfoItem = document.createElement('div');
                var additionalCheckbox = document.createElement('input');
                additionalCheckbox.type = 'checkbox';
                additionalCheckbox.style.height = '40px';
                additionalCheckbox.style.width = '40px';

                subCheckboxes.push(additionalCheckbox);  // Push this checkbox to the array

                // When a sub-checkbox is clicked, check if all are checked and update the parent checkbox
                additionalCheckbox.addEventListener('change', function() {
                    var allChecked = subCheckboxes.every(function(cb) {
                        return cb.checked;
                    });
                    checkbox.checked = allChecked;
                    saveCheckboxes();
                });

                // Check if additionalInfo item is an object (link with description)
                var additionalInfo = checklistItems[i].additionalInfo[j];

                if (typeof additionalInfo === 'object') {
                    var link = document.createElement('a');
                    link.href = additionalInfo.link.startsWith('www.') ? 'https://' + additionalInfo.link : additionalInfo.link;
                    link.textContent = additionalInfo.link;
                    link.target = '_blank';  // To open link in a new tab
                    additionalInfoItem.appendChild(additionalCheckbox);
                    additionalInfoItem.appendChild(link);
                    var description = document.createElement('span');
                    description.textContent = additionalInfo.description;
                    additionalInfoItem.appendChild(description);
                } else {
                    var additionalLabel = document.createElement('label');
                    additionalLabel.textContent = additionalInfo;
                    additionalInfoItem.appendChild(additionalCheckbox);
                    additionalInfoItem.appendChild(additionalLabel);
                }
                
                additionalInfoList.appendChild(additionalInfoItem);
            }
            item.appendChild(additionalInfoList);

            checklistContainer.appendChild(item);
        }

        function saveCheckboxes() {
            var checkboxes = document.querySelectorAll('input[type="checkbox"]');
            var checkboxStates = {};

            checkboxes.forEach(function(checkbox) {
                checkboxStates[checkbox.id] = checkbox.checked;
            });

            localStorage.setItem('checkboxStates', JSON.stringify(checkboxStates));
        }

        function loadCheckboxes() {
            var checkboxStates = JSON.parse(localStorage.getItem('checkboxStates'));

            if (checkboxStates) {
                for (var i = 0; i < Object.keys(checkboxStates).length; i++) {
                    var checkboxId = Object.keys(checkboxStates)[i];
                    var checkbox = document.getElementById(checkboxId);

                    if (checkbox) {
                        checkbox.checked = checkboxStates[checkboxId];
                    }
                }
            }
        }

        function resetCheckboxes() {
            var checkboxes = document.querySelectorAll('input[type="checkbox"]');

            checkboxes.forEach(function(checkbox) {
                checkbox.checked = false;
            });

            localStorage.removeItem('checkboxStates');
        }
    </script>
</body>
</html>





